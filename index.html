<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Faiora - Digital Planner Prototype</title>
    <link rel="icon" href="logo.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- Identity & Branding -->
    <meta name="description" content="Ignite your productivity with Faiora Digital Planner. Sync tasks and goals with Google.">
    <meta property="og:title" content="Faiora Digital Planner">
    <meta property="og:description" content="A fiery approach to digital planning.">
    <meta property="og:image" content="https://johnpaulinso.github.io/Faiora/logo.png">
    <meta property="og:url" content="https://johnpaulinso.github.io/Faiora/">
    
    <!-- Google Site Verification (Placeholder) -->
    <!-- Replace 'YOUR_VERIFICATION_CODE' with the code from Google Search Console -->
    <meta name="google-site-verification" content="googled6ec6ba0775bed83" />
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    
    <!-- Firebase SDK (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#f97316",
                        "primary-dark": "#ea580c",
                        "burnt-orange": "#7c2d12",
                        "charcoal": "#0a0a0a",
                        "cream-light": "#fff7ed",
                        "pastel-orange": "#ffedd5",
                        "pastel-peach": "#fed7aa",
                        "pastel-amber": "#fef3c7",
                        "pastel-yellow": "#fef9c3",
                        "gold-glow": "#fbbf24",
                    },
                    fontFamily: {
                        "display": ["Newsreader", "serif"],
                        "sans": ["Inter", "system-ui", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1.5rem", "3xl": "2rem", "full": "9999px" },
                },
            },
        }
    </script>

    <style type="text/tailwindcss">
        html {
            font-size: 14.4px; /* 90% of default 16px */
        }
        .dark-gradient-bg {
            background: linear-gradient(180deg, #7c2d12 0%, #111827 40%, #0a0a0a 100%);
            background-attachment: fixed;
        }
        .card-glow {
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5), 0 0 20px rgba(253, 186, 116, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-glow:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.6), 0 0 30px rgba(249, 115, 22, 0.2);
            z-index: 10;
        }
        .glow-orange {
            filter: drop-shadow(0 0 8px rgba(249, 115, 22, 0.6));
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .fab-shadow {
            box-shadow: 0 15px 35px -5px rgba(249, 115, 22, 0.4);
        }
        .sticky-note-1 { transform: rotate(-1.5deg); }
        .sticky-note-2 { transform: rotate(1.2deg); }
        .sticky-note-3 { transform: rotate(-0.8deg); }
        .sticky-note-4 { transform: rotate(2deg); }
        .sticky-note-5 { transform: rotate(-1.2deg); }
        .sticky-note-add { transform: rotate(0.5deg); }
        
        /* Loading Screen Specifics */
        .blur-overlay {
            backdrop-filter: blur(80px) saturate(120%);
            background: rgba(10, 10, 10, 0.7);
        }
        .flame-container {
            position: absolute;
            top: -18px; /* -20px * 0.9 */
            left: 0;
            right: 0;
            height: 36px; /* 40px * 0.9 */
            display: flex;
            justify-content: space-around;
            pointer-events: none;
        }
        .flame-tongue {
            width: 10.8px; /* 12px * 0.9 */
            height: 27px; /* 30px * 0.9 */
            background: linear-gradient(to top, rgba(249, 115, 22, 0.8), rgba(239, 68, 68, 0.4), transparent);
            border-radius: 50% 50% 20% 20%;
            filter: blur(5.4px); /* 6px * 0.9 */
            animation: flame-rise 2.5s infinite ease-in-out;
            transform-origin: bottom center;
        }
        @keyframes flame-rise {
            0%, 100% { transform: scaleY(1) translateY(0) scaleX(1); opacity: 0.4; }
            50% { transform: scaleY(1.5) translateY(-13.5px) scaleX(0.8); opacity: 0.7; }
        }
        .loading-arc {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            border: 1.8px solid transparent; /* 2px * 0.9 */
            border-top: 1.8px solid #f97316;
            filter: drop-shadow(0 0 13.5px rgba(249, 115, 22, 0.8));
            animation: spin-smooth 3s linear infinite;
        }
        @keyframes spin-smooth {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Clock */
        .analog-clock {
            width: 270px; /* 300px * 0.9 */
            height: 270px; /* 300px * 0.9 */
            border-radius: 50%;
            border: 2px solid rgba(249, 115, 22, 0.3);
            position: relative;
            background: rgba(0, 0, 0, 0.2);
            box-shadow: 0 0 40px rgba(249, 115, 22, 0.1), inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        /* Page Transition Animations */
        .fire-wipe-overlay {
            position: fixed;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            pointer-events: none;
            display: flex;
            align-items: flex-end;
            will-change: transform;
        }

        .fire-wipe-active {
            animation: fire-wipe-sweep 1.8s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
        }

        .fire-bg-video {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0.25;
            mix-blend-mode: screen; /* Note: Can be expensive, but looks best */
            pointer-events: none;
            backface-visibility: hidden;
            transform: translateZ(0);
        }

        .fire-wipe-sprite {
            width: 100vw;
            height: 360px; /* 400px * 0.9 */
            background-image: url('fire-wipe-spritesheet.png');
            background-repeat: no-repeat;
            background-size: 100% 1800px; /* 2000px * 0.9 */
            animation: fire-wipe-sprites 0.5s steps(5) infinite;
            filter: drop-shadow(0 0 40px rgba(249, 115, 22, 0.9));
            opacity: 0.98;
            backface-visibility: hidden;
            transform: translateZ(0);
        }

        @keyframes fire-wipe-sweep {
            0% { transform: translate3d(0, 70vh, 0); opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { transform: translate3d(0, -100vh, 0); opacity: 0; }
        }

        @keyframes fire-wipe-sprites {
            to { background-position: 0 -1800px; } /* 2000px * 0.9 */
        }

        .dissolve-layer {
            transition: opacity 0.3s ease-in-out, filter 0.3s ease-in-out;
        }

        .dissolve-out {
            opacity: 0;
            filter: blur(2px);
        }

        .dissolve-in {
            opacity: 1;
            filter: blur(0);
            animation: content-fade-in 0.4s ease-out forwards;
        }

        @keyframes content-fade-in {
            from { 
                opacity: 0;
                transform: translate3d(0, 10px, 0);
            }
            to { 
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
    </style>
<style>
    body {
      min-height: max(795px, 100dvh); /* 884px * 0.9 */
    }
  </style>
  </head>
<body class="dark-gradient-bg font-display text-slate-100 min-h-screen selection:bg-primary/30 overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate, useLocation } = ReactRouterDOM;

        // --- Firebase Initialization ---
        const firebaseConfig = {
            apiKey: "AIzaSyDktbyVgI7AAwaY2u-KsWBRwLZawy0949s",
            authDomain: "faiora-24f4a.firebaseapp.com",
            projectId: "faiora-24f4a",
            storageBucket: "faiora-24f4a.firebasestorage.app",
            messagingSenderId: "752265363994",
            appId: "1:752265363994:web:78795bfad67d2d541e07a3",
            measurementId: "G-B0DWSL1JMV"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const googleProvider = new firebase.auth.GoogleAuthProvider();

        // --- Shared Components ---

        const Sidebar = () => {
            const location = useLocation();
            const isActive = (path) => location.pathname === path;

            return (
                <aside className="hidden md:flex w-24 border-r border-white/5 flex-col items-center py-10 gap-10 bg-black/40 backdrop-blur-xl z-20">
                    <div className="text-primary mb-6">
                        <span className="material-symbols-outlined text-4xl font-light glow-orange" style={{fontVariationSettings: '"FILL" 1'}}>local_fire_department</span>
                    </div>
                    <nav className="flex flex-col gap-8">
                        <Link to="/" className={`group relative p-3 rounded-2xl transition-all duration-300 ${isActive('/') ? 'bg-primary/10 text-primary' : 'text-slate-500 hover:text-primary'}`} title="Tasks">
                            <span className="material-symbols-outlined text-3xl">check_box</span>
                        </Link>
                        <Link to="/notes" className={`group relative p-3 rounded-2xl transition-all duration-300 ${isActive('/notes') ? 'bg-primary/10 text-primary' : 'text-slate-500 hover:text-primary'}`} title="Notes">
                            <span className="material-symbols-outlined text-3xl">grid_view</span>
                        </Link>
                        <Link to="/calendar" className={`group relative p-3 rounded-2xl transition-all duration-300 ${isActive('/calendar') ? 'bg-primary/10 text-primary' : 'text-slate-500 hover:text-primary'}`} title="Calendar">
                            <span className="material-symbols-outlined text-3xl">calendar_month</span>
                        </Link>
                        <Link to="/stats" className={`group relative p-3 rounded-2xl transition-all duration-300 ${isActive('/stats') ? 'bg-primary/10 text-primary' : 'text-slate-500 hover:text-primary'}`} title="Graph">
                            <span className="material-symbols-outlined text-3xl">leaderboard</span>
                        </Link>
                        <Link to="/streak" className={`group relative p-3 rounded-2xl transition-all duration-300 ${isActive('/streak') ? 'bg-primary/10 text-primary glow-orange' : 'text-slate-500 hover:text-primary'}`} title="Flame">
                            <span className="material-symbols-outlined text-3xl" style={isActive('/streak') ? {fontVariationSettings: '"FILL" 1'} : {}}>local_fire_department</span>
                        </Link>
                        <Link to="/clock" className={`group relative p-3 rounded-2xl transition-all duration-300 ${isActive('/clock') ? 'bg-primary/10 text-primary' : 'text-slate-500 hover:text-primary'}`} title="Clock">
                            <span className="material-symbols-outlined text-3xl">history</span>
                        </Link>
                    </nav>
                </aside>
            );
        };

        const MobileNav = () => {
            const location = useLocation();
            const isActive = (path) => location.pathname === path;
            
            return (
                <nav className="fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-2xl border-t border-white/5 flex justify-around items-center py-5 md:hidden z-50">
                    <Link to="/" className={isActive('/') ? 'text-primary' : 'text-slate-500'}>
                        <span className="material-symbols-outlined text-3xl">check_box</span>
                    </Link>
                    <Link to="/notes" className={isActive('/notes') ? 'text-primary' : 'text-slate-500'}>
                        <span className="material-symbols-outlined text-3xl">grid_view</span>
                    </Link>
                    <Link to="/streak" className={isActive('/streak') ? 'text-primary glow-orange' : 'text-slate-500'}>
                        <span className="material-symbols-outlined text-3xl" style={{fontVariationSettings: isActive('/streak') ? '"FILL" 1' : ''}}>local_fire_department</span>
                    </Link>
                    <Link to="/stats" className={isActive('/stats') ? 'text-primary' : 'text-slate-500'}>
                        <span className="material-symbols-outlined text-3xl">leaderboard</span>
                    </Link>
                    <Link to="/clock" className={isActive('/clock') ? 'text-primary' : 'text-slate-500'}>
                        <span className="material-symbols-outlined text-3xl">history</span>
                    </Link>
                </nav>
            );
        };

        const Layout = ({ children }) => {
            return (
                <div className="flex h-screen overflow-hidden">
                    <Sidebar />
                    <main className="flex-1 flex flex-col overflow-y-auto no-scrollbar relative">
                        {children}
                        <button className="fixed bottom-12 right-12 w-20 h-20 bg-primary hover:bg-primary-dark text-white rounded-full flex items-center justify-center fab-shadow transition-all duration-300 hover:scale-110 active:scale-95 z-50 group">
                            <span className="material-symbols-outlined text-4xl group-hover:rotate-90 transition-transform duration-300">add</span>
                        </button>
                    </main>
                    <MobileNav />
                </div>
            );
        };

        const UserMenu = ({ user }) => {
            const [isOpen, setIsOpen] = useState(false);
            const menuRef = useRef();

            useEffect(() => {
                const handleClickOutside = (event) => {
                    if (menuRef.current && !menuRef.current.contains(event.target)) {
                        setIsOpen(false);
                    }
                };
                document.addEventListener("mousedown", handleClickOutside);
                return () => document.removeEventListener("mousedown", handleClickOutside);
            }, []);

            const handleLogout = () => {
                auth.signOut();
                localStorage.removeItem('faiora_logged_in');
            };

            return (
                <div className="relative" ref={menuRef}>
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="w-12 h-12 rounded-full overflow-hidden border border-white/10 ring-4 ring-black/20 hover:ring-primary/40 transition-all duration-300"
                    >
                        <img 
                            alt={user.displayName} 
                            className="w-full h-full object-cover bg-primary/20" 
                            src={user.photoURL || "https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y"}
                        />
                    </button>

                    {isOpen && (
                        <div className="absolute right-0 mt-4 w-64 glass-panel rounded-3xl p-2 shadow-2xl z-[100] animate-in fade-in slide-in-from-top-4 duration-300 overflow-hidden">
                            <div className="p-4 border-b border-white/5 mb-2">
                                <p className="text-cream-light font-bold truncate">{user.displayName}</p>
                                <p className="text-cream-light/40 text-xs truncate">{user.email}</p>
                            </div>
                            <button className="flex items-center gap-3 w-full p-3 hover:bg-white/5 rounded-2xl text-cream-light/60 hover:text-primary transition-all text-sm group">
                                <span className="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">person</span>
                                Profile
                            </button>
                            <button className="flex items-center gap-3 w-full p-3 hover:bg-white/5 rounded-2xl text-cream-light/60 hover:text-primary transition-all text-sm group">
                                <span className="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">settings</span>
                                Settings
                            </button>
                            <div className="h-px bg-white/5 my-2"></div>
                            <button 
                                onClick={handleLogout}
                                className="flex items-center gap-3 w-full p-3 hover:bg-red-500/10 rounded-2xl text-red-400 hover:text-red-300 transition-all text-sm group"
                            >
                                <span className="material-symbols-outlined text-xl group-hover:scale-110 transition-transform">logout</span>
                                Logout
                            </button>
                        </div>
                    )}
                </div>
            );
        };

        const Header = ({ title = "Faiora", subtitle = "Digital Planner", user }) => (
            <header className="flex justify-between items-start mb-16 px-4 md:px-0">
                <div className="flex items-center gap-4">
                    <div>
                        <h1 className="text-7xl font-bold tracking-tight text-cream-light italic leading-none">{title}</h1>
                        <p className="text-primary/70 text-sm mt-3 uppercase tracking-[0.4em] font-sans font-semibold">{subtitle}</p>
                    </div>
                </div>
                <div className="flex items-center gap-6">
                    <button className="text-cream-light/40 hover:text-cream-light transition-colors">
                        <span className="material-symbols-outlined text-2xl">search</span>
                    </button>
                    <UserMenu user={user} />
                </div>
            </header>
        );

        const LoginModal = () => {
            const handleLogin = () => {
                auth.signInWithPopup(googleProvider)
                    .then(() => localStorage.setItem('faiora_logged_in', 'true'))
                    .catch(e => console.error("Login failed", e));
            };

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 blur-overlay overflow-hidden">
                    <div className="absolute inset-0 z-0">
                        <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-[120px] animate-pulse"></div>
                        <div className="absolute bottom-1/4 right-1/4 w-96 h-96 bg-burnt-orange/30 rounded-full blur-[120px] animate-pulse delay-1000"></div>
                    </div>
                    
                    <div className="glass-panel max-w-xl w-full p-12 rounded-[3.5rem] flex flex-col items-center text-center relative z-10 shadow-2xl border-white/10">
                        <div className="mb-10 relative">
                             <div className="flame-container flex justify-center !static h-16 mb-4">
                                {[...Array(3)].map((_, i) => (
                                    <div key={i} className="flame-tongue !w-16 !h-24 mx-2" style={{animationDelay: `${i * 0.2}s`}}></div>
                                ))}
                            </div>
                            <h2 className="text-8xl font-black text-cream-light italic tracking-tighter drop-shadow-[0_0_50px_rgba(249,115,22,0.4)]">Faiora</h2>
                            <p className="text-primary font-bold uppercase tracking-[0.8em] text-sm mt-4">Ignite your productivity</p>
                        </div>

                        <p className="text-cream-light/60 text-lg mb-12 max-w-md font-sans leading-relaxed">
                            Experience a fiery approach to digital planning. Sync your lists, tasks, and goals with Google and light up your potential.
                        </p>

                        <button 
                            onClick={handleLogin}
                            className="bg-white text-black py-5 px-10 rounded-3xl font-bold flex items-center gap-4 hover:bg-primary hover:text-white transition-all duration-500 hover:scale-105 active:scale-95 shadow-xl group mb-12"
                        >
                            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" className="w-6 h-6 group-hover:invert transition-all" alt="Google" />
                            <span className="text-xl">Login with Google</span>
                        </button>

                        <div className="flex gap-8 text-[10px] uppercase tracking-widest font-bold text-cream-light/20">
                            <a href="https://johnpaulinso.github.io/Faiora/privacy.html" className="hover:text-primary transition-colors">Privacy Policy</a>
                            <a href="https://johnpaulinso.github.io/Faiora/terms.html" className="hover:text-primary transition-colors">Terms of Service</a>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Page Components ---

        const DashboardPage = ({ user }) => (
            <Layout>
                <div className="max-w-7xl mx-auto w-full px-8 md:px-16 py-12">
                    <Header user={user} />
                    <section className="mb-12">
                        <div className="flex items-center gap-4">
                            <h2 className="text-2xl font-bold text-cream-light/90 uppercase tracking-[0.3em]">TO DO LIST</h2>
                            <div className="h-[1px] flex-1 bg-gradient-to-r from-primary/30 to-transparent"></div>
                        </div>
                    </section>
                    <section className="grid grid-cols-2 lg:grid-cols-6 gap-6 mb-20 px-2">
                        {/* Sticky Notes */}
                        <div className="card-glow sticky-note-1 aspect-square bg-orange-100/90 rounded-2xl p-6 flex flex-col justify-between border-b-4 border-orange-300/50 group cursor-pointer relative overflow-hidden">
                            <span className="material-symbols-outlined text-orange-600/60 text-xl">push_pin</span>
                            <div className="flex flex-col gap-0.5">
                                <p className="text-[0.6rem] font-sans font-bold text-orange-900/30 uppercase tracking-[0.2em]">Priority</p>
                                <p className="text-xl font-bold text-orange-950/80 tracking-tight">3A</p>
                            </div>
                        </div>
                        <div className="card-glow sticky-note-2 aspect-square bg-amber-50/90 rounded-2xl p-6 flex flex-col justify-between border-b-4 border-amber-200/50 group cursor-pointer">
                            <span className="material-symbols-outlined text-amber-600/60 text-xl">shopping_bag</span>
                            <div className="flex flex-col gap-0.5">
                                <p className="text-[0.6rem] font-sans font-bold text-amber-900/30 uppercase tracking-[0.2em]">Label</p>
                                <p className="text-xl font-bold text-amber-950/80 tracking-tight">Errands</p>
                            </div>
                        </div>
                        <div className="card-glow sticky-note-3 aspect-square bg-orange-50/90 rounded-2xl p-6 flex flex-col justify-between border-b-4 border-orange-200/50 group cursor-pointer">
                            <span className="material-symbols-outlined text-orange-500/60 text-xl">cleaning_services</span>
                            <div className="flex flex-col gap-0.5">
                                <p className="text-[0.6rem] font-sans font-bold text-orange-900/30 uppercase tracking-[0.2em]">Label</p>
                                <p className="text-xl font-bold text-orange-950/80 tracking-tight">Chores</p>
                            </div>
                        </div>
                        <div className="card-glow sticky-note-4 aspect-square bg-pastel-peach/90 rounded-2xl p-6 flex flex-col justify-between border-b-4 border-orange-300/50 group cursor-pointer">
                            <span className="material-symbols-outlined text-orange-700/60 text-xl">shopping_cart</span>
                            <div className="flex flex-col gap-0.5">
                                <p className="text-[0.6rem] font-sans font-bold text-orange-900/30 uppercase tracking-[0.2em]">Label</p>
                                <p className="text-xl font-bold text-orange-950/80 tracking-tight">Groceries</p>
                            </div>
                        </div>
                        <div className="card-glow sticky-note-5 aspect-square bg-yellow-50/90 rounded-2xl p-6 flex flex-col justify-between border-b-4 border-yellow-200/50 group cursor-pointer">
                            <span className="material-symbols-outlined text-yellow-700/60 text-xl">more_horiz</span>
                            <div className="flex flex-col gap-0.5">
                                <p className="text-[0.6rem] font-sans font-bold text-yellow-900/30 uppercase tracking-[0.2em]">Label</p>
                                <p className="text-xl font-bold text-yellow-950/80 tracking-tight">Others</p>
                            </div>
                        </div>
                        <div className="sticky-note-add aspect-square border-2 border-dashed border-primary/40 rounded-2xl p-6 flex flex-col items-center justify-center group cursor-pointer hover:bg-primary/5 transition-colors">
                            <div className="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary mb-3">
                                <span className="material-symbols-outlined text-2xl">add</span>
                            </div>
                            <p className="text-sm font-bold text-primary/80 uppercase tracking-widest text-center px-2">Add New Reminder</p>
                        </div>
                    </section>
                    <section className="grid grid-cols-1 lg:grid-cols-3 gap-12 mb-32">
                        <div className="lg:col-span-2 space-y-6">
                            <div className="glass-panel rounded-3xl p-8 flex items-center justify-between group hover:bg-white/5 transition-colors cursor-pointer">
                                <div className="flex items-center gap-6">
                                    <div className="w-12 h-12 rounded-full border border-primary/40 flex items-center justify-center text-primary">
                                        <span className="material-symbols-outlined">circle</span>
                                    </div>
                                    <div>
                                        <h4 className="text-xl text-cream-light font-medium">Finalize project proposal</h4>
                                        <p className="text-cream-light/40 text-sm font-sans mt-1">Due Today • Priority 3A</p>
                                    </div>
                                </div>
                                <span className="material-symbols-outlined text-cream-light/20 group-hover:text-primary transition-colors">chevron_right</span>
                            </div>
                            <div className="glass-panel rounded-3xl p-8 flex items-center justify-between group hover:bg-white/5 transition-colors cursor-pointer">
                                <div className="flex items-center gap-6">
                                    <div className="w-12 h-12 rounded-full border border-white/10 flex items-center justify-center text-cream-light/20">
                                        <span className="material-symbols-outlined">circle</span>
                                    </div>
                                    <div>
                                        <h4 className="text-xl text-cream-light font-medium">Weekly meal prep</h4>
                                        <p className="text-cream-light/40 text-sm font-sans mt-1">Due Tomorrow • Chores</p>
                                    </div>
                                </div>
                                <span className="material-symbols-outlined text-cream-light/20 group-hover:text-primary transition-colors">chevron_right</span>
                            </div>
                        </div>
                        <div className="glass-panel rounded-3xl p-10 flex flex-col items-center justify-center text-center space-y-6">
                            <div className="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center text-primary mb-2">
                                <span className="material-symbols-outlined text-4xl" style={{fontVariationSettings: '"FILL" 1'}}>bolt</span>
                            </div>
                            <h3 className="text-2xl font-bold text-cream-light">Quick Focus</h3>
                            <p className="text-cream-light/60 font-sans leading-relaxed">Start a 25-minute pomodoro session to breeze through your tasks.</p>
                            <button className="w-full bg-primary/20 hover:bg-primary/30 text-primary border border-primary/30 py-4 rounded-2xl font-bold transition-all uppercase tracking-widest text-xs">Start Session</button>
                        </div>
                    </section>
                </div>
            </Layout>
        );

        const NotesPage = ({ user }) => (
            <Layout>
                <div className="max-w-7xl mx-auto w-full px-6 md:px-16 py-12">
                    <Header user={user} />
                    <section className="mb-10">
                        <div className="flex items-center gap-4">
                            <h2 className="text-xl md:text-2xl font-bold text-cream-light/90 uppercase tracking-[0.3em]">ALL NOTES</h2>
                            <div className="h-[1px] flex-1 bg-gradient-to-r from-primary/30 to-transparent"></div>
                        </div>
                    </section>
                    <section className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 pb-32">
                        <div className="card-glow sticky-note-1 bg-amber-50/95 rounded-3xl p-7 min-h-[220px] flex flex-col border-b-8 border-amber-200/50 group cursor-pointer relative">
                            <div className="absolute top-4 right-4 text-amber-600">
                                <span className="material-symbols-outlined text-xl" style={{fontVariationSettings: "'FILL' 1"}}>push_pin</span>
                            </div>
                            <h3 className="text-xl font-bold text-amber-950 mb-3 pr-6">Q3 Strategy Goals</h3>
                            <div className="flex-1">
                                <p className="text-amber-900/70 font-sans text-sm leading-relaxed line-clamp-4">Focus on user retention metrics. Implement new onboarding flow by end of August.</p>
                            </div>
                            <div className="mt-4 flex gap-2">
                                <span className="text-[10px] font-bold uppercase tracking-widest bg-amber-200/40 text-amber-800 px-2 py-1 rounded">Strategy</span>
                            </div>
                        </div>
                        <div className="card-glow sticky-note-2 bg-orange-50/95 rounded-3xl p-7 min-h-[220px] flex flex-col border-b-8 border-orange-200/50 group cursor-pointer relative">
                            <h3 className="text-xl font-bold text-orange-950 mb-3">Grocery List</h3>
                            <div className="flex-1 space-y-2">
                                <div className="flex items-center gap-2 text-orange-900/80 font-sans text-sm">
                                    <span className="material-symbols-outlined text-lg">check_box_outline_blank</span>
                                    <span>Fresh basil & tomatoes</span>
                                </div>
                                <div className="flex items-center gap-2 text-orange-900/80 font-sans text-sm">
                                    <span className="material-symbols-outlined text-lg">check_box_outline_blank</span>
                                    <span>Organic honey</span>
                                </div>
                            </div>
                            <div className="mt-4 flex gap-2">
                                <span className="text-[10px] font-bold uppercase tracking-widest bg-orange-200/40 text-orange-800 px-2 py-1 rounded">Personal</span>
                            </div>
                        </div>
                        <div className="card-glow sticky-note-3 bg-pastel-peach/95 rounded-3xl p-7 min-h-[220px] flex flex-col border-b-8 border-orange-300/50 group cursor-pointer relative">
                            <h3 className="text-xl font-bold text-orange-950 mb-3">Gift Ideas</h3>
                            <div className="flex-1">
                                <p className="text-orange-900/70 font-sans text-sm leading-relaxed line-clamp-4 italic">"The best gifts are experiences that light a fire..."</p>
                            </div>
                        </div>
                    </section>
                </div>
            </Layout>
        );

        const CalendarPage = ({ user }) => (
            <Layout>
                <div className="flex-1 flex flex-col md:flex-row h-full">
                    <div className="flex-1 overflow-y-auto no-scrollbar px-6 md:px-12 py-10">
                        <Header user={user} />
                        <div className="flex items-center justify-between mb-8">
                            <div className="flex items-center gap-6">
                                <h2 className="text-3xl font-display font-bold text-cream-light italic">March 2026</h2>
                                <div className="flex gap-2">
                                    <button className="p-2 glass-panel rounded-full text-cream-light/60 hover:text-primary transition-colors"><span className="material-symbols-outlined">chevron_left</span></button>
                                    <button className="p-2 glass-panel rounded-full text-cream-light/60 hover:text-primary transition-colors"><span className="material-symbols-outlined">chevron_right</span></button>
                                </div>
                            </div>
                            <div className="flex bg-black/30 p-1 rounded-xl glass-panel">
                                <button className="px-4 py-2 text-xs font-bold uppercase tracking-widest text-cream-light/40 hover:text-cream-light">Week</button>
                                <button className="px-4 py-2 text-xs font-bold uppercase tracking-widest bg-primary/20 text-primary rounded-lg">Month</button>
                            </div>
                        </div>
                        <div className="glass-panel rounded-3xl overflow-hidden border-white/5 shadow-2xl">
                            <div className="grid grid-cols-7 bg-white/5 text-center border-b border-white/5 py-4">
                                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                                    <div key={day} className="text-[10px] font-bold text-primary/60 uppercase tracking-widest">{day}</div>
                                ))}
                            </div>
                            <div className="grid grid-cols-7 auto-rows-[minmax(120px,_1fr)]">
                                {[...Array(31)].map((_, i) => (
                                    <div key={i} className={`border-r border-b border-white/5 p-4 hover:bg-white/5 transition-colors group cursor-pointer ${i === 9 ? 'bg-primary/10' : ''}`}>
                                        <span className={`text-sm font-sans ${i === 9 ? 'font-bold text-primary' : ''}`}>{i + 1}</span>
                                        {i === 9 && <div className="absolute top-3 right-3 w-1.5 h-1.5 rounded-full bg-primary glow-orange"></div>}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                    <aside className="w-full md:w-96 border-l border-white/5 bg-black/20 backdrop-blur-md p-8 overflow-y-auto no-scrollbar">
                        <div className="mb-10">
                            <div className="flex items-center gap-4 mb-2">
                                <h3 className="text-2xl font-display font-bold text-cream-light italic">Daily Agenda</h3>
                                <div className="h-px flex-1 bg-gradient-to-r from-primary/30 to-transparent"></div>
                            </div>
                            <p className="text-cream-light/40 text-xs font-sans uppercase tracking-[0.2em] font-bold">Tuesday, Mar 10</p>
                        </div>
                        <div className="space-y-6">
                            <div className="card-glow bg-orange-100/90 rounded-2xl p-5 border-b-4 border-orange-300/50 cursor-pointer">
                                <h4 className="text-lg font-bold text-orange-950/80 leading-tight">Project sync with team</h4>
                                <p className="text-xs text-orange-900/60 mt-2 font-sans">9:00 AM • Priority 3A</p>
                            </div>
                        </div>
                    </aside>
                </div>
            </Layout>
        );

        const StatsPage = ({ user }) => (
            <Layout>
                <div className="max-w-7xl mx-auto w-full px-6 md:px-12 py-10 pb-32">
                    <Header user={user} subtitle="Productivity Statistics" />
                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        <div className="lg:col-span-4 glass-panel rounded-3xl p-8 flex flex-col items-center justify-center card-glow">
                            <h3 className="text-xl font-display font-bold text-cream-light italic mb-8 w-full">Overall Progress</h3>
                            <div className="relative w-56 h-56 flex items-center justify-center">
                                <svg className="w-full h-full -rotate-90" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" fill="transparent" r="42" stroke="rgba(255,255,255,0.05)" strokeWidth="8"></circle>
                                    <circle cx="50" cy="50" fill="transparent" r="42" stroke="#f97316" strokeDasharray="211 264" strokeLinecap="round" strokeWidth="8"></circle>
                                </svg>
                                <div className="absolute inset-0 flex flex-col items-center justify-center">
                                    <span className="text-4xl font-display font-bold text-cream-light">80%</span>
                                    <span className="text-[10px] font-bold text-primary/60 uppercase tracking-widest mt-1">Completed</span>
                                </div>
                            </div>
                        </div>
                        <div className="lg:col-span-8 glass-panel rounded-3xl p-8 card-glow">
                            <h3 className="text-xl font-display font-bold text-cream-light italic mb-8">Completion per List</h3>
                            <div className="space-y-8">
                                <div className="space-y-2">
                                    <div className="flex justify-between text-xs font-sans font-medium text-cream-light/60"><span>Priority 3A</span><span>92%</span></div>
                                    <div className="w-full h-2 bg-white/5 rounded-full overflow-hidden">
                                        <div className="h-full bg-pastel-orange rounded-full" style={{width: '92%'}}></div>
                                    </div>
                                </div>
                                <div className="space-y-2">
                                    <div className="flex justify-between text-xs font-sans font-medium text-cream-light/60"><span>Errands</span><span>75%</span></div>
                                    <div className="w-full h-2 bg-white/5 rounded-full overflow-hidden">
                                        <div className="h-full bg-pastel-peach rounded-full" style={{width: '75%'}}></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </Layout>
        );

        const StreakPage = ({ user }) => (
            <Layout>
                <div className="max-w-7xl mx-auto w-full px-8 md:px-16 py-12">
                    <Header user={user} subtitle="Streak & Achievements" />
                    <section className="mb-16 flex flex-col items-center text-center">
                        <div className="relative mb-6">
                            <span className="material-symbols-outlined text-[120px] text-primary glow-orange leading-none relative z-10" style={{fontVariationSettings: "'FILL' 1"}}>local_fire_department</span>
                        </div>
                        <h2 className="text-8xl font-black text-primary italic glow-orange tracking-tighter mb-2">12 DAYS</h2>
                        <p className="text-cream-light/40 text-lg uppercase tracking-[0.5em] font-sans font-bold">Current Streak</p>
                    </section>
                    <section className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-20">
                        <div className="glass-panel card-glow rounded-3xl p-8 flex flex-col items-center text-center gap-4">
                            <div className="w-16 h-16 rounded-full bg-amber-400/10 flex items-center justify-center text-amber-400 border border-amber-400/30">
                                <span className="material-symbols-outlined text-3xl" style={{fontVariationSettings: "'FILL' 1"}}>light_mode</span>
                            </div>
                            <h3 className="text-xl font-bold text-cream-light">Early Bird</h3>
                            <p className="text-cream-light/40 text-sm font-sans">Completed 5 tasks before 8AM</p>
                        </div>
                        {/* More badges can go here */}
                    </section>
                </div>
            </Layout>
        );

        const ClockPage = ({ user }) => (
            <Layout>
                <div className="max-w-7xl mx-auto w-full px-8 md:px-16 py-12">
                    <Header user={user} subtitle="Clock & Notifications" />
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center min-h-[500px]">
                        <div className="flex flex-col items-center justify-center space-y-12">
                            <div className="analog-clock flex items-center justify-center">
                                <div className="absolute w-[2px] h-[108px] bg-white origin-bottom rotate-[190deg] rounded-full bottom-[50%]"></div>
                                <div className="absolute w-[4px] h-[72px] bg-white origin-bottom rotate-[45deg] rounded-full bottom-[50%]"></div>
                                <div className="absolute w-[1px] h-[117px] bg-primary origin-bottom rotate-[310deg] rounded-full bottom-[50%] glow-orange"></div>
                                <div className="w-3 h-3 bg-primary border-2 border-white rounded-full z-10"></div>
                            </div>
                            <div className="text-center">
                                <h2 className="text-6xl font-display text-cream-light mb-2">10:08</h2>
                                <p className="text-primary/60 font-sans tracking-[0.5em] uppercase text-sm font-bold">Monday, Oct 23</p>
                            </div>
                        </div>
                        <div className="space-y-4">
                            <h2 className="text-2xl font-bold text-cream-light/90 uppercase tracking-[0.3em] mb-4">Notifications</h2>
                            <div className="glass-panel p-6 rounded-3xl flex gap-5 border-l-4 border-l-orange-500 hover:bg-white/5 transition-all cursor-pointer">
                                <div className="w-12 h-12 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-500 shrink-0">
                                    <span className="material-symbols-outlined">priority_high</span>
                                </div>
                                <div className="flex-1">
                                    <h4 className="font-bold text-cream-light">Task Deadline Reached</h4>
                                    <p className="text-sm text-cream-light/60 font-sans mt-1">The project proposal deadline has passed.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </Layout>
        );

        const LoadingPage = ({ onComplete }) => {
            useEffect(() => {
                const timer = setTimeout(onComplete, 2500);
                return () => clearTimeout(timer);
            }, [onComplete]);

            return (
                <div className="fixed inset-0 z-50 blur-overlay flex flex-col items-center justify-center">
                    <div className="loading-arc-container relative flex items-center justify-center w-[252px] h-[252px]">
                        <div className="loading-arc"></div>
                        <div className="absolute flex flex-col items-center text-center z-10">
                            <div className="relative">
                                <div className="flame-container">
                                    {[...Array(5)].map((_, i) => (
                                        <div key={i} className="flame-tongue" style={{animationDelay: `${i * 0.15}s`}}></div>
                                    ))}
                                </div>
                                <h1 className="text-7xl font-bold tracking-tight text-cream-light italic leading-none drop-shadow-[0_0_30px_rgba(249,115,22,0.4)]">
                                    Faiora
                                </h1>
                            </div>
                            <div className="mt-8">
                                <p className="text-primary text-[10px] uppercase tracking-[0.8em] font-sans font-bold">Fallo ora</p>
                            </div>
                        </div>
                    </div>
                    <div className="absolute bottom-24 w-full px-12 max-w-md">
                        <div className="flex justify-between items-end mb-4 px-1">
                            <span className="text-[10px] font-sans font-medium uppercase tracking-[0.2em] text-white/40">Awakening Systems</span>
                            <span className="text-xs font-sans font-bold text-primary tracking-tighter">100%</span>
                        </div>
                        <div className="relative h-[4px] w-full bg-white/5 rounded-full overflow-hidden">
                            <div className="absolute top-0 left-0 h-full bg-primary w-full rounded-full transition-all duration-[2000ms] ease-out"></div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Root Component ---
        


        const TransitionManager = ({ children }) => {
            const location = useLocation();
            const [displayLocation, setDisplayLocation] = useState(location);
            const [isWiping, setIsWiping] = useState(false);
            const [isDissolving, setIsDissolving] = useState(false);
            const [transitionKey, setTransitionKey] = useState(0);

            const playFireSFX = () => {
                const audio = new Audio('fire_transition_sfx.mp3');
                audio.volume = 0.4; // 40% volume
                audio.play().catch(e => console.log("Audio play blocked", e));
                
                // Fade out after 1 second
                setTimeout(() => {
                    const fadeDuration = 500; // 0.5s fade
                    const step = 0.05;
                    const interval = fadeDuration / (0.4 / step);
                    
                    const fadeInterval = setInterval(() => {
                        if (audio.volume > step) {
                            audio.volume -= step;
                        } else {
                            audio.volume = 0;
                            clearInterval(fadeInterval);
                            audio.pause();
                        }
                    }, interval);
                }, 1000);
            };

            useEffect(() => {
                // Trigger wipe on initial mount (post-loader)
                setIsWiping(true);
                setIsDissolving(true);
                setTransitionKey(prev => prev + 1);
                
                playFireSFX();
                
                const swapTimer = setTimeout(() => {
                    setIsDissolving(false);
                }, 900);

                const doneTimer = setTimeout(() => {
                    setIsWiping(false);
                }, 2000);

                return () => {
                    clearTimeout(swapTimer);
                    clearTimeout(doneTimer);
                };
            }, []);

            useEffect(() => {
                if (location.pathname !== displayLocation.pathname) {
                    setIsWiping(true);
                    setIsDissolving(true);
                    setTransitionKey(prev => prev + 1);

                    playFireSFX();
                    
                    // MIDPOINT: Swap content when fire covers screen
                    const swapTimer = setTimeout(() => {
                        setDisplayLocation(location);
                        setIsDissolving(false);
                    }, 900);

                    // END: Cleanup wipe
                    const doneTimer = setTimeout(() => {
                        setIsWiping(false);
                    }, 2000);

                    return () => {
                        clearTimeout(swapTimer);
                        clearTimeout(doneTimer);
                    };
                }
            }, [location, displayLocation]);

            return (
                <div className="relative w-full h-full overflow-hidden">
                    {isWiping && (
                        <div key={transitionKey} className="fire-wipe-overlay fire-wipe-active">
                            <div className="fire-wipe-sprite"></div>
                        </div>
                    )}
                    <div key={displayLocation.pathname} className={`w-full h-full transition-all duration-300 ${isDissolving ? 'dissolve-out' : 'dissolve-in'}`}>
                        <Routes location={displayLocation}>
                            {children}
                        </Routes>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isTimerDone, setIsTimerDone] = useState(false);
            const [isAuthChecked, setIsAuthChecked] = useState(false);
            const [user, setUser] = useState(null);
            const videoRef = useRef();

            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged((u) => {
                    setUser(u);
                    setIsAuthChecked(true);
                    
                    // If user is already found (logged in), we can skip some of the wait 
                    // to make the "redirect" feel faster.
                    if (u) {
                        localStorage.setItem('faiora_logged_in', 'true');
                    }
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                const timer = setTimeout(() => {
                    setIsTimerDone(true);
                }, 2500);
                return () => clearTimeout(timer);
            }, []);

            useEffect(() => {
                if (videoRef.current) {
                    videoRef.current.playbackRate = 1.5;
                }
            }, [user, isTimerDone, isAuthChecked]);

            // We show the loader until:
            // 1. The 2.5s aesthetic timer is done.
            // 2. AND we've actually checked with Firebase if someone is logged in.
            if (!isTimerDone || !isAuthChecked) {
                return <LoadingPage onComplete={() => setIsTimerDone(true)} />;
            }

            // If we are "Checking" but have no user, show the modal.
            // As soon as 'user' is set by the popup, this component re-renders and swaps to the main app.
            if (!user) {
                return <LoginModal />;
            }

            // REDIRECT TO INDEX: When user is authenticated, we render the main app.
            // Since it's a new mount of MemoryRouter, it defaults to path="/".
            return (
                <MemoryRouter>
                    <video 
                        ref={videoRef}
                        className="fire-bg-video"
                        autoPlay 
                        loop 
                        muted 
                        playsInline
                        src="fire_bg_video.mp4"
                    />
                    <TransitionManager>
                        <Route path="/" element={<DashboardPage user={user} />} />
                        <Route path="/notes" element={<NotesPage user={user} />} />
                        <Route path="/calendar" element={<CalendarPage user={user} />} />
                        <Route path="/stats" element={<StatsPage user={user} />} />
                        <Route path="/streak" element={<StreakPage user={user} />} />
                        <Route path="/clock" element={<ClockPage user={user} />} />
                    </TransitionManager>
                </MemoryRouter>
            );
        };

        const container = document.getElementById('root');
        const root = createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>